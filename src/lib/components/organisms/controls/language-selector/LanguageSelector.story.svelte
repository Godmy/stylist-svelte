<script lang="ts">
  import LanguageSelector from './LanguageSelector.svelte';
  import type { ILanguageSelectorProps } from './types';

  // Define the controls for Storybook
  const languages: ILanguageSelectorProps['languages'] = [
    { code: 'en', name: 'English', nativeName: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
    { code: 'es', name: 'Spanish', nativeName: 'EspaÃ±ol', flag: 'ğŸ‡ªğŸ‡¸' },
    { code: 'fr', name: 'French', nativeName: 'FranÃ§ais', flag: 'ğŸ‡«ğŸ‡·' },
    { code: 'de', name: 'German', nativeName: 'Deutsch', flag: 'ğŸ‡©ğŸ‡ª' },
    { code: 'it', name: 'Italian', nativeName: 'Italiano', flag: 'ğŸ‡®ğŸ‡¹' },
    { code: 'ja', name: 'Japanese', nativeName: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ' },
    { code: 'ko', name: 'Korean', nativeName: 'í•œêµ­ì–´', flag: 'ğŸ‡°ğŸ‡·' },
    { code: 'zh', name: 'Chinese', nativeName: 'ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },
    { code: 'ru', name: 'Russian', nativeName: 'Ğ ÑƒÑÑĞºĞ¸Ğ¹', flag: 'ğŸ‡·ğŸ‡º' },
  ];

  let currentLanguage = $state('en');
  let showFlags = $state(true);
  let showNativeName = $state(false);
  let searchable = $state(true);
  let dropdownPlacement: ILanguageSelectorProps['dropdownPlacement'] = $state('bottom');
  let variant: ILanguageSelectorProps['variant'] = $state('default');
  let size: ILanguageSelectorProps['size'] = $state('md');

  function handleLanguageChange(newLanguage: string) {
    currentLanguage = newLanguage;
    console.log('Language changed to:', newLanguage);
  }
</script>

<div class="p-8">
  <h1>LanguageSelector Story</h1>

  <div class="mb-4">
    <label class="block mb-2">Current Language:
      <select bind:value={currentLanguage} class="ml-2 border rounded p-1">
        {#each languages as lang}
          <option value={lang.code}>{lang.name}</option>
        {/each}
      </select>
    </label>
  </div>

  <LanguageSelector
    {languages}
    {currentLanguage}
    onLanguageChange={handleLanguageChange}
    {showFlags}
    {showNativeName}
    {searchable}
    {dropdownPlacement}
    {variant}
    {size}
  />
</div>